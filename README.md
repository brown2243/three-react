# 다시 하는 ThreeJS 학습

## [씬 그래프](https://threejs.org/manual/#ko/scenegraph)

Three.js에서 가장 중요한 것은 무엇보다 씬 그래프(scene graph)입니다.
3D 엔진에서 씬 그래프란 요소(node)의 계층 구조를 그림으로 나타낸 것으로, 여기서 각 요소는 각각의 "지역 공간(local space)"을 가리킵니다.

### 예시

태양계, 그 중에서도 태양, 지구, 달

- 지구는 태양을 중심으로 공전합니다
- 달은 지구를 중심으로 공전하죠
- 달의 공전 궤도는 원과 유사합니다
- 달의 관점에서 달은 지구의 "지역 공간" 안에서 공전하는 셈이죠
- 태양이 봤을 때 달은 취한 사람처럼 스피로그래프(spirograph, 용수철 모양의 그래프)를 그리며 돌지만, 달은 그저 지구의 "지역 공간"을 도는 것에만 집중할 뿐입니다.

우리는 지구에서 살지만 지구의 자전이나 자전축, 태양을 공전하는 일은 크게 신경쓰지 않습니다. 이건 지구의 일이니까요. 우리가 걷거나, 뭔가를 타고 이동하거나 수영하거나 달리거나 하는 일들은 지구의 일과는 무관해 보입니다. 그래서 옛날 사람들은 지구가 공전, 자전한다는 사실을 쉽게 받아들이지 못했죠. 우리가 걷든, 헤엄을 치든, 우리의 삶은 지구의 "지역 공간" 안에서 이루어집니다. 태양에서 봤을 때 여러분은 지구를 시속 약 1,600km로 돌고 태양의 주위를 시속 약 107,800km로 도는 셈이지만, 우리는 이렇게 빨리 움직이기 위해 따로 노력할 필요가 없습니다. 달과 마찬가지로 우리가 신경써야 하는 건 지구의 "지역 공간" 뿐이죠.

Object3D는 Mesh와 마찬가지로 씬 그래프의 한 요소지만, material이나 geometry가 없다는 점이 다릅니다.
그저 하나의 빈 "지역 공간"인 셈이죠.

sunMesh와 earthMesh는 solarSystem의 자식입니다.
이 3 객체는 각각 회전하죠.
이제 earthMesh는 sunMesh의 자식이 아니므로 5배 커지지도 않았습니다.

### 씬 그래프의 요소를 시각화하는 것이 도움이 될 때도 있습니다.

이 것을 도와줄 헬퍼 클래스가 있습니다.
AxesHelper로, 이 클래스는 지역 X, Y, Z 축을 표시해줍니다. 한 번 여태까지 만든 요소에 모두 추가해보죠.

x축(빨강) 그리고 z축(파랑) 축이 보이나요? 카메라가 바로 위에서 아래를 내려다 보고, 각 물체도 y축을 따라 회전하므로 y축(초록)은 보여도 거의 점처럼 보일 겁니다.

또 Three.js와 함께 사용하기로 유명한 lil-gui도 사용할 겁니다. lil-gui는 UI 라이브러리로, 객체와 속성 이름을 넘겨받고, 해당 속성의 타입을 기반으로 속성값을 UI로 조정할 수 있게 해줍니다.

### 씬 그래프 예시

자동차

- Root(scene)
  - Car body
    - Left front wheel
    - right front wheel
    - Left back wheel
    - right back wheel

다른 예시는 링크에서;;
